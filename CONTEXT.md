# üìã –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞ APARU

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
**APARU** - —ç—Ç–æ –¥–µ–º–æ-–ø—Ä–æ–µ–∫—Ç –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–∞–∫—Å–∏ –≤ –≤–∏–¥–µ Telegram Mini App (WebApp), —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π —á–µ—Ä–µ–∑ Railway –∏ —Ö—Ä–∞–Ω—è—â–∏–π—Å—è –≤ GitHub.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∑–∞–ø—É—Å–∫–∞
- **`start_aparu.py`** - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ª–∞—É–Ω—á–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ (Python)
- **`start_aparu.sh`** - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ª–∞—É–Ω—á–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ (Bash)
- **`start_project.py`** - –°—Ç–∞—Ä—ã–π –ª–∞—É–Ω—á–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞
- **`start.sh`** - –°—Ç–∞—Ä—ã–π –ª–∞—É–Ω—á–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### üèóÔ∏è Backend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **`main.py`** - –û—Å–Ω–æ–≤–Ω–æ–π FastAPI —Å–µ—Ä–≤–µ—Ä —Å REST API
- **`backend/main.py`** - –î—É–±–ª–∏—Ä—É—é—â–∏–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞ (–∏–¥–µ–Ω—Ç–∏—á–µ–Ω main.py)
- **`llm_client.py`** - –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM (Ollama/fallback)
- **`bot.py`** - Telegram Bot –Ω–∞ aiogram

### üåê Frontend
- **`webapp.html`** - Telegram WebApp –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —á–∞—Ç–æ–º

### üìä –î–∞–Ω–Ω—ã–µ
- **`fixtures.json`** - –ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ–µ–∑–¥–∫–∏, —á–µ–∫–∏, –∫–∞—Ä—Ç—ã, —Ç–∏–∫–µ—Ç—ã)
- **`kb.json`** - –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π FAQ —Å –æ—Ç–≤–µ—Ç–∞–º–∏

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **`requirements.txt`** - Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **`backend/requirements.txt`** - –î—É–±–ª–∏—Ä—É—é—â–∏–π —Ñ–∞–π–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **`railway.toml`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Railway
- **`Procfile`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–ª—è Railway
- **`docker-compose.yml`** - Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **`env.example`** - –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **`test_api.sh`** - –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **`README.md`** - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **FastAPI** - REST API —Å–µ—Ä–≤–µ—Ä
- **aiogram** - Telegram Bot framework
- **langdetect** - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
- **ollama** - –õ–æ–∫–∞–ª—å–Ω–∞—è LLM (—Å fallback)
- **uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä

### Frontend
- **HTML/JS** - WebApp –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **Telegram WebApp SDK** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

### –•–æ—Å—Ç–∏–Ω–≥
- **Railway** - –û–±–ª–∞—á–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥
- **GitHub** - –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
1. **–°—Ç–∞—Ç—É—Å –ø–æ–µ–∑–¥–∫–∏** - "–ì–¥–µ –≤–æ–¥–∏—Ç–µ–ª—å?" ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
2. **–ß–µ–∫–∏** - "–ü—Ä–∏—à–ª–∏—Ç–µ —á–µ–∫" ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ–∫
3. **–ö–∞—Ä—Ç—ã** - "–ö–∞–∫–∏–µ –∫–∞—Ä—Ç—ã?" ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç—ã
4. **–ñ–∞–ª–æ–±—ã** - "–°–ø–∏—Å–∞–ª–∏ –¥–≤–∞–∂–¥—ã" ‚Üí —ç—Å–∫–∞–ª–∞—Ü–∏—è –∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É
5. **FAQ** - "–ö–∞–∫ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ü–µ–Ω–∞?" ‚Üí –æ—Ç–≤–µ—Ç—ã –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ (RU/KZ/EN)
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ (—É–¥–∞–ª–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏)
- ‚úÖ –ü–æ–∏—Å–∫ –≤ FAQ
- ‚úÖ –ú–æ–∫–∏ —Ç–∞–∫—Å–∏-—Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ intent, confidence, source

## üåê –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã API

### –û—Å–Ω–æ–≤–Ω—ã–µ
- **`POST /chat`** - –û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç —Å –ò–ò
- **`GET /webapp`** - WebApp –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **`GET /health`** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

### –ú–æ–∫–∏
- **`GET /ride-status/{user_id}`** - –°—Ç–∞—Ç—É—Å –ø–æ–µ–∑–¥–∫–∏
- **`POST /send-receipt/{user_id}`** - –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ–∫–∞
- **`GET /cards/{user_id}`** - –°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç
- **`POST /escalate/{user_id}`** - –≠—Å–∫–∞–ª–∞—Ü–∏—è –∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É

## üì± Telegram Bot –∫–æ–º–∞–Ω–¥—ã
- **`/start`** - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- **`/help`** - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- **`/support`** - –û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

## üöÄ –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞

### 1. APARU –ª–∞—É–Ω—á–µ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
python3 start_aparu.py
# –∏–ª–∏
./start_aparu.sh
```

### 2. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
```bash
# API —Å–µ—Ä–≤–µ—Ä
python3 main.py

# Telegram Bot (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
python3 bot.py
```

## üîó –°—Å—ã–ª–∫–∏
- **üåê WebApp:** http://localhost:8000/webapp
- **üì° API:** http://localhost:8000/chat
- **‚ù§Ô∏è Health:** http://localhost:8000/health
- **üì± Bot:** @Aparu_support_bot
- **üåê Production:** https://taxi-support-ai-assistant-production.up.railway.app

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- LLaMA –º–æ–¥–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Railway (4GB –ª–∏–º–∏—Ç)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback —Å–∏—Å—Ç–µ–º–∞ —Å –≥–æ—Ç–æ–≤—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
- –î–ª—è LLaMA –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –¢–µ—Å—Ç API
curl -X POST http://localhost:8000/chat \
  -H "Content-Type: application/json" \
  -d '{"text": "–ì–¥–µ –≤–æ–¥–∏—Ç–µ–ª—å?", "user_id": "test123", "locale": "RU"}'

# –¢–µ—Å—Ç Health
curl http://localhost:8000/health
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### ChatRequest
```json
{
  "text": "string",
  "user_id": "string", 
  "locale": "string"
}
```

### ChatResponse
```json
{
  "response": "string",
  "intent": "string",
  "confidence": "float",
  "source": "string",
  "timestamp": "string"
}
```

## üîÑ Workflow
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –¢–µ–∫—Å—Ç –ø—Ä–µ–¥–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è (—É–¥–∞–ª–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏)
3. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —è–∑—ã–∫
4. –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ç–µ–Ω—Ç
5. –ï—Å–ª–∏ FAQ - –ø–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
6. –ï—Å–ª–∏ –Ω–µ FAQ - –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ LLM
7. –í–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

## üé® UI/UX
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏
- –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp SDK
