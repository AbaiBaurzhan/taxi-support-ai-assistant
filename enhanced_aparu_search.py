#!/usr/bin/env python3
"""
–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –¥–ª—è APARU LLM
–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤–∞—Ä–∏–∞—Ü–∏–π
"""

import json
import re
from pathlib import Path
from typing import List, Dict, Tuple

class EnhancedAPARUSearch:
    def __init__(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞ APARU"""
        
        # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
        self.knowledge_base = []
        
        # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–∞–ø–ø–∏–Ω–≥–∏ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤–∞—Ä–∏–∞—Ü–∏–π
        self.question_mappings = {
            "–Ω–∞—Ü–µ–Ω–∫–∞": {
                "questions": ["—á—Ç–æ —Ç–∞–∫–æ–µ –Ω–∞—Ü–µ–Ω–∫–∞", "—á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–∞—Ü–µ–Ω–∫–∞"],
                "contexts": [
                    "–ø–æ—á–µ–º—É –¥–æ—Ä–æ–≥–æ", "–ø–æ—á–µ–º—É —Ç–∞–∫ –¥–æ—Ä–æ–≥–æ", "–æ—Ç–∫—É–¥–∞ —Ü–µ–Ω–∞", "–ø–æ—á–µ–º—É –≤—ã—Å–æ–∫–∞—è —Ü–µ–Ω–∞",
                    "–∑–∞—á–µ–º –Ω–∞—Ü–µ–Ω–∫–∞", "—á—Ç–æ —Ç–∞–∫–æ–µ surge pricing", "–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ",
                    "–ø–æ–≤—ã—à–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å", "–¥–æ–ø–ª–∞—Ç–∞", "–ø–æ—á–µ–º—É —Ü–µ–Ω–∞ –≤—ã—à–µ"
                ],
                "keywords": ["–Ω–∞—Ü–µ–Ω–∫–∞", "—Ü–µ–Ω–∞", "—Å—Ç–æ–∏–º–æ—Å—Ç—å", "–¥–æ—Ä–æ–≥–æ", "—Ç–∞—Ä–∏—Ñ", "—Å–ø—Ä–æ—Å", "–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ"]
            },
            "–ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ": {
                "questions": ["–∫–∞–∫ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å"],
                "contexts": [
                    "–∫–∞–∫ –∑–∞–ø–ª–∞—Ç–∏—Ç—å", "–∫–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å", "–≥–¥–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å", "–∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –¥–µ–Ω—å–≥–∏",
                    "–∫–∞–∫ –≤–Ω–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞", "–∫–∞–∫ –ø–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç", "–≥–¥–µ –∑–∞–ø–ª–∞—Ç–∏—Ç—å",
                    "–∫–∞–∫ –æ–ø–ª–∞—Ç–∏—Ç—å –ø–æ–µ–∑–¥–∫—É", "–≥–¥–µ –Ω–∞–π—Ç–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ"
                ],
                "keywords": ["–ø–æ–ø–æ–ª–Ω–∏—Ç—å", "–±–∞–ª–∞–Ω—Å", "—Å—á–µ—Ç", "–¥–µ–Ω—å–≥–∏", "–æ–ø–ª–∞—Ç–∏—Ç—å", "–ø–ª–∞—Ç–µ–∂", "qiwi", "kaspi"]
            },
            "–∫–æ–º—Ñ–æ—Ä—Ç": {
                "questions": ["—á—Ç–æ —Ç–∞–∫–æ–µ —Ç–∞—Ä–∏—Ñ –∫–æ–º—Ñ–æ—Ä—Ç", "—á—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–º—Ñ–æ—Ä—Ç"],
                "contexts": [
                    "–∫–æ–º—Ñ–æ—Ä—Ç –∫–ª–∞—Å—Å", "–ø—Ä–µ–º–∏—É–º —Ç–∞–∫—Å–∏", "–Ω–æ–≤–∞—è –º–∞—à–∏–Ω–∞", "—á—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–º—Ñ–æ—Ä—Ç",
                    "—á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –∫–æ–º—Ñ–æ—Ä—Ç", "–∫–æ–º—Ñ–æ—Ä—Ç –º–∞—à–∏–Ω–∞", "–ø—Ä–µ–º–∏—É–º –∫–ª–∞—Å—Å"
                ],
                "keywords": ["–∫–æ–º—Ñ–æ—Ä—Ç", "–ø—Ä–µ–º–∏—É–º", "–∫–ª–∞—Å—Å", "–º–∞—à–∏–Ω–∞", "–Ω–æ–≤–∞—è", "–ª—É—á—à–µ"]
            },
            "—Ä–∞—Å—Ü–µ–Ω–∫–∞": {
                "questions": ["–∫–∞–∫ —É–∑–Ω–∞—Ç—å —Ä–∞—Å—Ü–µ–Ω–∫—É"],
                "contexts": [
                    "–∫–∞–∫ —É–∑–Ω–∞—Ç—å —Ü–µ–Ω—É", "–≥–¥–µ –Ω–∞–π—Ç–∏ —Ü–µ–Ω—É", "–∫–∞–∫ —É–∑–Ω–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å",
                    "–≥–¥–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–µ–Ω—É", "–∫–∞–∫ —É–∑–Ω–∞—Ç—å —Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç", "–≥–¥–µ –Ω–∞–π—Ç–∏ —Ä–∞—Å—Ü–µ–Ω–∫—É"
                ],
                "keywords": ["—Ä–∞—Å—Ü–µ–Ω–∫–∞", "—Ü–µ–Ω–∞", "—Å—Ç–æ–∏–º–æ—Å—Ç—å", "—Ç–∞—Ä–∏—Ñ", "–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å", "—É–∑–Ω–∞—Ç—å"]
            },
            "–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π": {
                "questions": ["–∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–∫–∞–∑"],
                "contexts": [
                    "–º–æ–∂–Ω–æ –ª–∏ –∑–∞–∫–∞–∑–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ", "–∫–∞–∫ –∑–∞–∫–∞–∑–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ", "–º–æ–∂–Ω–æ –ª–∏ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å",
                    "–∫–∞–∫ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å", "–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–∫–∞–∑", "–∑–∞–∫–∞–∑ –Ω–∞ –≤—Ä–µ–º—è"
                ],
                "keywords": ["–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π", "–∑–∞—Ä–∞–Ω–µ–µ", "–∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å", "–∑–∞–∫–∞–∑", "–≤—Ä–µ–º—è"]
            },
            "–¥–æ—Å—Ç–∞–≤–∫–∞": {
                "questions": ["–∫–∞–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–∫–∏"],
                "contexts": [
                    "–∫–∞–∫ –∑–∞–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É", "–∫–∞–∫ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å—ã–ª–∫—É", "–∫—É—Ä—å–µ—Ä—Å–∫–∞—è —Å–ª—É–∂–±–∞",
                    "–¥–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–≤–∞—Ä–∞", "–∫—É—Ä—å–µ—Ä", "–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤–µ—â–∏", "–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã"
                ],
                "keywords": ["–¥–æ—Å—Ç–∞–≤–∫–∞", "–∫—É—Ä—å–µ—Ä", "—Ç–æ–≤–∞—Ä", "–ø–æ—Å—ã–ª–∫–∞", "–¥–æ—Å—Ç–∞–≤–∏—Ç—å", "–≤–µ—â–∏", "–¥–æ–∫—É–º–µ–Ω—Ç—ã"]
            },
            "–≤–æ–¥–∏—Ç–µ–ª—å": {
                "questions": ["–∫–∞–∫ –º–Ω–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–∫–∞–∑—ã –∏ —á—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ"],
                "contexts": [
                    "–∫–∞–∫ —Å—Ç–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª–µ–º", "–∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª–µ–º", "–∫–∞–∫ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å",
                    "–∫–∞–∫ —Å—Ç–∞—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º", "—Ä–∞–±–æ—Ç–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–º", "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–¥–∏—Ç–µ–ª—è"
                ],
                "keywords": ["–≤–æ–¥–∏—Ç–µ–ª—å", "–∑–∞–∫–∞–∑—ã", "—Ä–∞–±–æ—Ç–∞—Ç—å", "—Å—Ç–∞—Ç—å", "–ø–∞—Ä—Ç–Ω–µ—Ä", "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"]
            },
            "–º–æ—Ç–æ—á–∞—Å—ã": {
                "questions": ["—á—Ç–æ —Ç–∞–∫–æ–µ –º–æ—Ç–æ—á–∞—Å—ã"],
                "contexts": [
                    "–ø–æ—á–µ–º—É —Å—á–∏—Ç–∞—é—Ç –≤—Ä–µ–º—è", "–æ–ø–ª–∞—Ç–∞ –∑–∞ –≤—Ä–µ–º—è", "–≤—Ä–µ–º—è –ø–æ–µ–∑–¥–∫–∏",
                    "—Å—á–∏—Ç–∞—é—Ç –≤—Ä–µ–º—è", "—Ç–∞—Ä–∏—Ñ –∑–∞ –≤—Ä–µ–º—è", "–æ–ø–ª–∞—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏"
                ],
                "keywords": ["–º–æ—Ç–æ—á–∞—Å—ã", "–≤—Ä–µ–º—è", "–ø–æ–µ–∑–¥–∫–∞", "–æ–ø–ª–∞—Ç–∞", "—Å—á–∏—Ç–∞—é—Ç", "–º–∏–Ω—É—Ç—ã"]
            },
            "—Ç–∞–∫—Å–æ–º–µ—Ç—Ä": {
                "questions": ["–∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–∞–∫—Å–æ–º–µ—Ç—Ä–æ–º"],
                "contexts": [
                    "–∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–∞–∫—Å–æ–º–µ—Ç—Ä–æ–º", "–∫–∞–∫ –≤–∫–ª—é—á–∏—Ç—å —Ç–∞–∫—Å–æ–º–µ—Ç—Ä",
                    "–∫–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–∞–∫—Å–æ–º–µ—Ç—Ä–æ–º", "—Ä–∞–±–æ—Ç–∞ —Å —Ç–∞–∫—Å–æ–º–µ—Ç—Ä–æ–º"
                ],
                "keywords": ["—Ç–∞–∫—Å–æ–º–µ—Ç—Ä", "—Ä–∞–±–æ—Ç–∞—Ç—å", "–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è", "–≤–∫–ª—é—á–∏—Ç—å", "—É–ø—Ä–∞–≤–ª—è—Ç—å"]
            },
            "–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ": {
                "questions": ["–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á—Ç–æ –¥–µ–ª–∞—Ç—å"],
                "contexts": [
                    "–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è", "–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–µ—Ç", "–ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º",
                    "–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è", "–æ—à–∏–±–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è", "–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"
                ],
                "keywords": ["–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ", "–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç", "–Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è", "–∑–∞–≤–∏—Å–∞–µ—Ç", "–ø—Ä–æ–±–ª–µ–º–∞", "–æ—à–∏–±–∫–∞"]
            },
            "–æ—Ç–º–µ–Ω–∞": {
                "questions": ["–∫–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑"],
                "contexts": [
                    "–æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–µ–∑–¥–∫—É", "–æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑", "–æ—Ç–∫–∞–∑ –æ—Ç –ø–æ–µ–∑–¥–∫–∏",
                    "–Ω–µ –Ω—É–∂–µ–Ω –∑–∞–∫–∞–∑", "–ø–µ—Ä–µ–¥—É–º–∞–ª", "–æ—Ç–º–µ–Ω–∏—Ç—å –≤—ã–∑–æ–≤"
                ],
                "keywords": ["–æ—Ç–º–µ–Ω–∏—Ç—å", "–æ—Ç–∫–∞–∑", "–ø–µ—Ä–µ–¥—É–º–∞–ª", "–Ω–µ –Ω—É–∂–µ–Ω", "–æ—Ç–º–µ–Ω–∞"]
            },
            "–≤–æ–¥–∏—Ç–µ–ª—å_–Ω–µ_–ø—Ä–∏–µ—Ö–∞–ª": {
                "questions": ["—á—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –≤–æ–¥–∏—Ç–µ–ª—å –Ω–µ –ø—Ä–∏–µ—Ö–∞–ª"],
                "contexts": [
                    "–≤–æ–¥–∏—Ç–µ–ª—å –Ω–µ –ø—Ä–∏–µ—Ö–∞–ª", "–≤–æ–¥–∏—Ç–µ–ª—å –æ–ø–æ–∑–¥–∞–ª", "–≤–æ–¥–∏—Ç–µ–ª—å –Ω–µ –ø—Ä–∏—à–µ–ª",
                    "–∂–¥–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è", "–≤–æ–¥–∏—Ç–µ–ª—å –Ω–µ –ø–æ—è–≤–∏–ª—Å—è", "–ø—Ä–æ–±–ª–µ–º–∞ —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º"
                ],
                "keywords": ["–≤–æ–¥–∏—Ç–µ–ª—å", "–Ω–µ –ø—Ä–∏–µ—Ö–∞–ª", "–æ–ø–æ–∑–¥–∞–ª", "–∂–¥–∞—Ç—å", "–ø—Ä–æ–±–ª–µ–º–∞"]
            },
            "—Å–≤—è–∑—å_—Å_–≤–æ–¥–∏—Ç–µ–ª–µ–º": {
                "questions": ["–∫–∞–∫ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º"],
                "contexts": [
                    "–ø–æ–∑–≤–æ–Ω–∏—Ç—å –≤–æ–¥–∏—Ç–µ–ª—é", "—Å–≤—è–∑–∞—Ç—å—Å—è —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º", "–Ω–∞–ø–∏—Å–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª—é",
                    "—Å–≤—è–∑—å —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º", "–∫–æ–Ω—Ç–∞–∫—Ç –≤–æ–¥–∏—Ç–µ–ª—è", "–Ω–æ–º–µ—Ä –≤–æ–¥–∏—Ç–µ–ª—è"
                ],
                "keywords": ["—Å–≤—è–∑–∞—Ç—å—Å—è", "–ø–æ–∑–≤–æ–Ω–∏—Ç—å", "–≤–æ–¥–∏—Ç–µ–ª—å", "–∫–æ–Ω—Ç–∞–∫—Ç", "–Ω–æ–º–µ—Ä", "–Ω–∞–ø–∏—Å–∞—Ç—å"]
            },
            "–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ": {
                "questions": ["–∫–∞–∫ —É–∑–Ω–∞—Ç—å –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–æ–¥–∏—Ç–µ–ª—å"],
                "contexts": [
                    "–≥–¥–µ –≤–æ–¥–∏—Ç–µ–ª—å", "–æ—Ç—Å–ª–µ–¥–∏—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è", "–º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–æ–¥–∏—Ç–µ–ª—è",
                    "–∫–∞—Ä—Ç–∞ –≤–æ–¥–∏—Ç–µ–ª—è", "–º–∞—Ä—à—Ä—É—Ç –≤–æ–¥–∏—Ç–µ–ª—è", "–≥–¥–µ –µ–¥–µ—Ç –≤–æ–¥–∏—Ç–µ–ª—å"
                ],
                "keywords": ["–≥–¥–µ", "–≤–æ–¥–∏—Ç–µ–ª—å", "–æ—Ç—Å–ª–µ–¥–∏—Ç—å", "–º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ", "–∫–∞—Ä—Ç–∞", "–º–∞—Ä—à—Ä—É—Ç"]
            },
            "—ç–∫–æ–Ω–æ–º": {
                "questions": ["—á—Ç–æ —Ç–∞–∫–æ–µ —ç–∫–æ–Ω–æ–º —Ç–∞—Ä–∏—Ñ"],
                "contexts": [
                    "—ç–∫–æ–Ω–æ–º –∫–ª–∞—Å—Å", "–±–∞–∑–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ", "–æ–±—ã—á–Ω–æ–µ —Ç–∞–∫—Å–∏",
                    "–¥–µ—à–µ–≤–æ–µ —Ç–∞–∫—Å–∏", "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ"
                ],
                "keywords": ["—ç–∫–æ–Ω–æ–º", "–±–∞–∑–æ–≤—ã–π", "–æ–±—ã—á–Ω—ã–π", "–¥–µ—à–µ–≤—ã–π", "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π"]
            },
            "—É–Ω–∏–≤–µ—Ä—Å–∞–ª": {
                "questions": ["–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª"],
                "contexts": [
                    "—É–Ω–∏–≤–µ—Ä—Å–∞–ª —Ç–∞—Ä–∏—Ñ", "–±–æ–ª—å—à–æ–π –±–∞–≥–∞–∂", "–∫—Ä—É–ø–Ω–æ–≥–∞–±–∞—Ä–∏—Ç–Ω—ã–π –≥—Ä—É–∑",
                    "–º–Ω–æ–≥–æ –≤–µ—â–µ–π", "–±–∞–≥–∞–∂–Ω–∏–∫", "–≥—Ä—É–∑–æ–≤–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ"
                ],
                "keywords": ["—É–Ω–∏–≤–µ—Ä—Å–∞–ª", "–±–∞–≥–∞–∂", "–≥—Ä—É–∑", "–≤–µ—â–∏", "–±–∞–≥–∞–∂–Ω–∏–∫"]
            },
            "–≥—Ä—É–∑–æ–≤–æ–µ": {
                "questions": ["–º–æ–∂–Ω–æ –ª–∏ –∑–∞–∫–∞–∑–∞—Ç—å –≥—Ä—É–∑–æ–≤–æ–µ —Ç–∞–∫—Å–∏"],
                "contexts": [
                    "–≥—Ä—É–∑–æ–≤–æ–µ —Ç–∞–∫—Å–∏", "–ø–µ—Ä–µ–≤–æ–∑–∫–∞ –≥—Ä—É–∑–∞", "–∫—Ä—É–ø–Ω—ã–π –≥—Ä—É–∑",
                    "–º–µ–±–µ–ª—å", "—Ç–µ—Ö–Ω–∏–∫–∞", "–≥—Ä—É–∑–æ–≤–∏–∫"
                ],
                "keywords": ["–≥—Ä—É–∑–æ–≤–æ–µ", "–≥—Ä—É–∑", "–ø–µ—Ä–µ–≤–æ–∑–∫–∞", "–º–µ–±–µ–ª—å", "—Ç–µ—Ö–Ω–∏–∫–∞"]
            },
            "—ç–≤–∞–∫—É–∞—Ç–æ—Ä": {
                "questions": ["–∫–∞–∫ –∑–∞–∫–∞–∑–∞—Ç—å —ç–≤–∞–∫—É–∞—Ç–æ—Ä"],
                "contexts": [
                    "—ç–≤–∞–∫—É–∞—Ç–æ—Ä", "–±—É–∫—Å–∏—Ä–æ–≤–∫–∞", "–ø–æ–ª–æ–º–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è",
                    "–Ω–µ –∑–∞–≤–æ–¥–∏—Ç—Å—è", "–∞–≤–∞—Ä–∏—è", "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∞–≤—Ç–æ"
                ],
                "keywords": ["—ç–≤–∞–∫—É–∞—Ç–æ—Ä", "–±—É–∫—Å–∏—Ä–æ–≤–∫–∞", "–ø–æ–ª–æ–º–∫–∞", "–Ω–µ –∑–∞–≤–æ–¥–∏—Ç—Å—è", "–∞–≤–∞—Ä–∏—è"]
            },
            "–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ_—Å–ø–∏—Å–∞–Ω–∏–µ": {
                "questions": ["—á—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —Å–ø–∏—Å–∞–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É"],
                "contexts": [
                    "–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ", "–¥–≤–æ–π–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ", "–æ—à–∏–±–∫–∞ –≤ –ø–ª–∞—Ç–µ–∂–µ",
                    "—Å–ø–∏—Å–∞–ª–∏ –ª–∏—à–Ω–µ–µ", "–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—É–º–º–∞", "–æ—à–∏–±–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è"
                ],
                "keywords": ["–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ", "—Å–ø–∏—Å–∞–Ω–∏–µ", "–æ—à–∏–±–∫–∞", "—Å—É–º–º–∞", "–ø–ª–∞—Ç–µ–∂"]
            },
            "—Å–ø—Ä–∞–≤–∫–∞": {
                "questions": ["–∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É –æ –ø–æ–µ–∑–¥–∫–µ"],
                "contexts": [
                    "—Å–ø—Ä–∞–≤–∫–∞ –æ –ø–æ–µ–∑–¥–∫–µ", "–¥–æ–∫—É–º–µ–Ω—Ç –æ –ø–æ–µ–∑–¥–∫–µ", "–∫–≤–∏—Ç–∞–Ω—Ü–∏—è",
                    "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏", "–æ—Ç—á–µ—Ç –æ –ø–æ–µ–∑–¥–∫–µ"
                ],
                "keywords": ["—Å–ø—Ä–∞–≤–∫–∞", "–¥–æ–∫—É–º–µ–Ω—Ç", "–∫–≤–∏—Ç–∞–Ω—Ü–∏—è", "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ", "–æ—Ç—á–µ—Ç"]
            },
            "–Ω–∞–ª–∏—á–Ω—ã–µ": {
                "questions": ["–º–æ–∂–Ω–æ –ª–∏ –æ–ø–ª–∞—Ç–∏—Ç—å –Ω–∞–ª–∏—á–Ω—ã–º–∏"],
                "contexts": [
                    "–æ–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏", "–¥–µ–Ω—å–≥–∏ –Ω–∞–ª–∏—á–Ω—ã–º–∏", "–Ω–∞–ª–∏—á–Ω—ã–µ –¥–µ–Ω—å–≥–∏",
                    "–æ–ø–ª–∞—Ç–∞ –∫—É–ø—é—Ä–∞–º–∏", "–Ω–∞–ª–∏—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç"
                ],
                "keywords": ["–Ω–∞–ª–∏—á–Ω—ã–µ", "–¥–µ–Ω—å–≥–∏", "–∫—É–ø—é—Ä—ã", "–Ω–∞–ª–∏—á–Ω—ã–π", "—Ä–∞—Å—á–µ—Ç"]
            },
            "–∫–∞—Ä—Ç–∞": {
                "questions": ["–∫–∞–∫ –ø—Ä–∏–≤—è–∑–∞—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫—É—é –∫–∞—Ä—Ç—É"],
                "contexts": [
                    "–ø—Ä–∏–≤—è–∑–∞—Ç—å –∫–∞—Ä—Ç—É", "–¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É", "–±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞",
                    "–ø–ª–∞—Ç–µ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞", "visa", "mastercard"
                ],
                "keywords": ["–∫–∞—Ä—Ç–∞", "–ø—Ä–∏–≤—è–∑–∞—Ç—å", "–¥–æ–±–∞–≤–∏—Ç—å", "–±–∞–Ω–∫–æ–≤—Å–∫–∞—è", "–ø–ª–∞—Ç–µ–∂–Ω–∞—è"]
            },
            "–∑–∞–±—ã—Ç—ã–µ_–≤–µ—â–∏": {
                "questions": ["—á—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∑–∞–±—ã–ª –≤–µ—â–∏ –≤ —Ç–∞–∫—Å–∏"],
                "contexts": [
                    "–∑–∞–±—ã–ª –≤–µ—â–∏", "–∑–∞–±—ã–ª –≤ —Ç–∞–∫—Å–∏", "–ø–æ—Ç–µ—Ä—è–ª –≤–µ—â–∏",
                    "–æ—Å—Ç–∞–≤–∏–ª –≤–µ—â–∏", "–∑–∞–±—ã–ª —Å—É–º–∫—É", "–∑–∞–±—ã–ª —Ç–µ–ª–µ—Ñ–æ–Ω"
                ],
                "keywords": ["–∑–∞–±—ã–ª", "–≤–µ—â–∏", "–ø–æ—Ç–µ—Ä—è–ª", "–æ—Å—Ç–∞–≤–∏–ª", "—Å—É–º–∫–∞", "—Ç–µ–ª–µ—Ñ–æ–Ω"]
            },
            "–æ—Ç–∑—ã–≤": {
                "questions": ["–∫–∞–∫ –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –æ –ø–æ–µ–∑–¥–∫–µ"],
                "contexts": [
                    "–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤", "–æ—Ü–µ–Ω–∏—Ç—å –ø–æ–µ–∑–¥–∫—É", "–æ—Ü–µ–Ω–∫–∞ –≤–æ–¥–∏—Ç–µ–ª—è",
                    "–æ—Ç–∑—ã–≤ –æ –≤–æ–¥–∏—Ç–µ–ª–µ", "—Ä–µ–π—Ç–∏–Ω–≥ –≤–æ–¥–∏—Ç–µ–ª—è"
                ],
                "keywords": ["–æ—Ç–∑—ã–≤", "–æ—Ü–µ–Ω–∏—Ç—å", "–æ—Ü–µ–Ω–∫–∞", "—Ä–µ–π—Ç–∏–Ω–≥", "–≤–æ–¥–∏—Ç–µ–ª—å"]
            },
            "–ø—Ä–æ–º–æ–∫–æ–¥": {
                "questions": ["—á—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–º–æ–∫–æ–¥", "–∫–∞–∫ –≤–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–æ–∫–æ–¥"],
                "contexts": [
                    "–ø—Ä–æ–º–æ–∫–æ–¥", "—Å–∫–∏–¥–∫–∞", "–ø—Ä–æ–º–æ –∫–æ–¥", "–∫–æ–¥ —Å–∫–∏–¥–∫–∏",
                    "–≤–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–æ–∫–æ–¥", "–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥"
                ],
                "keywords": ["–ø—Ä–æ–º–æ–∫–æ–¥", "—Å–∫–∏–¥–∫–∞", "–ø—Ä–æ–º–æ", "–∫–æ–¥", "–≤–≤–µ—Å—Ç–∏", "–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å"]
            },
            "–∑–∞–∫–∞–∑_–¥–ª—è_–¥—Ä—É–≥–æ–≥–æ": {
                "questions": ["–º–æ–∂–Ω–æ –ª–∏ –∑–∞–∫–∞–∑–∞—Ç—å —Ç–∞–∫—Å–∏ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞"],
                "contexts": [
                    "–∑–∞–∫–∞–∑ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ", "—Ç–∞–∫—Å–∏ –¥–ª—è –¥—Ä—É–≥–∞", "–∑–∞–∫–∞–∑ –¥–ª—è —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞",
                    "—Ç–∞–∫—Å–∏ –¥–ª—è –º–∞–º—ã", "–∑–∞–∫–∞–∑ –¥–ª—è –ø–∞–ø—ã"
                ],
                "keywords": ["–¥—Ä—É–≥–æ–≥–æ", "–¥—Ä—É–≥–∞", "—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞", "–º–∞–º—ã", "–ø–∞–ø—ã"]
            },
            "—Ä–µ–π—Ç–∏–Ω–≥_–≤–æ–¥–∏—Ç–µ–ª–µ–π": {
                "questions": ["–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π"],
                "contexts": [
                    "—Ä–µ–π—Ç–∏–Ω–≥ –≤–æ–¥–∏—Ç–µ–ª–µ–π", "—Å–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞", "–æ—Ü–µ–Ω–∫–∞ –≤–æ–¥–∏—Ç–µ–ª–µ–π",
                    "–∫–∞—á–µ—Å—Ç–≤–æ –≤–æ–¥–∏—Ç–µ–ª–µ–π", "–ª—É—á—à–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏"
                ],
                "keywords": ["—Ä–µ–π—Ç–∏–Ω–≥", "–≤–æ–¥–∏—Ç–µ–ª–µ–π", "—Å–∏—Å—Ç–µ–º–∞", "–æ—Ü–µ–Ω–∫–∞", "–∫–∞—á–µ—Å—Ç–≤–æ"]
            },
            "–∂–∞–ª–æ–±–∞_–Ω–∞_–≤–æ–¥–∏—Ç–µ–ª—è": {
                "questions": ["—á—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –≤–æ–¥–∏—Ç–µ–ª—å –≤–µ–¥–µ—Ç —Å–µ–±—è –Ω–µ–ø–æ–¥–æ–±–∞—é—â–µ"],
                "contexts": [
                    "–∂–∞–ª–æ–±–∞ –Ω–∞ –≤–æ–¥–∏—Ç–µ–ª—è", "–≤–æ–¥–∏—Ç–µ–ª—å –≤–µ–¥–µ—Ç —Å–µ–±—è –ø–ª–æ—Ö–æ", "–Ω–µ–ø–æ–¥–æ–±–∞—é—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ",
                    "–ø–ª–æ—Ö–æ–π –≤–æ–¥–∏—Ç–µ–ª—å", "–∂–∞–ª–æ–±–∞", "–ø—Ä–æ–±–ª–µ–º–∞ —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º"
                ],
                "keywords": ["–∂–∞–ª–æ–±–∞", "–≤–æ–¥–∏—Ç–µ–ª—å", "–ø–ª–æ—Ö–æ", "–Ω–µ–ø–æ–¥–æ–±–∞—é—â–µ", "–ø—Ä–æ–±–ª–µ–º–∞"]
            }
        }
        
    def load_knowledge_base(self, kb_file: str = "database_Aparu/BZ.txt", extended_file: str = "database_Aparu/extended_BZ.txt"):
        """–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π"""
        
        print("üìö –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π...")
        
        # –ß–∏—Ç–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –±–∞–∑—É
        with open(kb_file, 'r', encoding='utf-8') as f:
            content = f.read()
        
        # –ß–∏—Ç–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –±–∞–∑—É
        try:
            with open(extended_file, 'r', encoding='utf-8') as f:
                extended_content = f.read()
            content += "\n" + extended_content
            print("‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω–∞")
        except FileNotFoundError:
            print("‚ö†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω—É—é")
        
        # –ü–∞—Ä—Å–∏–º –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
        sections = content.split('- question:')
        
        for section in sections[1:]:
            lines = section.strip().split('\n')
            if len(lines) >= 2:
                question = lines[0].strip()
                answer = '\n'.join(lines[1:]).strip()
                
                # –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å
                kb_entry = {
                    "question": question,
                    "answer": answer,
                    "similarity_score": 0.0
                }
                
                self.knowledge_base.append(kb_entry)
        
        print(f"‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(self.knowledge_base)} –∑–∞–ø–∏—Å–µ–π")
        return self.knowledge_base
    
    def search(self, query: str, top_k: int = 3) -> List[Dict]:
        """–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –º–∞–ø–ø–∏–Ω–≥–∞–º–∏"""
        
        query_lower = query.lower().strip()
        results = []
        
        # –ò—â–µ–º –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –º–∞–ø–ø–∏–Ω–≥–∞–º
        for category, mappings in self.question_mappings.items():
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
            for context in mappings["contexts"]:
                if context in query_lower:
                    # –ò—â–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
                    for item in self.knowledge_base:
                        question_lower = item['question'].lower().strip()
                        
                        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
                        for exact_question in mappings["questions"]:
                            if exact_question in question_lower:
                                item_copy = item.copy()
                                item_copy['similarity_score'] = 60.0  # –ü–æ–≤—ã—à–∞–µ–º score
                                results.append(item_copy)
                                break
                        
                        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                        for keyword in mappings["keywords"]:
                            if keyword in question_lower:
                                item_copy = item.copy()
                                item_copy['similarity_score'] = 40.0
                                results.append(item_copy)
                                break
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–∞–ø—Ä—è–º—É—é
            for keyword in mappings["keywords"]:
                if keyword in query_lower:
                    for item in self.knowledge_base:
                        question_lower = item['question'].lower().strip()
                        
                        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
                        for exact_question in mappings["questions"]:
                            if exact_question in question_lower:
                                item_copy = item.copy()
                                item_copy['similarity_score'] = 50.0
                                results.append(item_copy)
                                break
                        
                        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                        if keyword in question_lower:
                            item_copy = item.copy()
                            item_copy['similarity_score'] = 30.0
                            results.append(item_copy)
        
        # –£–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
        seen = set()
        unique_results = []
        for result in results:
            if result['question'] not in seen:
                seen.add(result['question'])
                unique_results.append(result)
        
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ score
        unique_results.sort(key=lambda x: x['similarity_score'], reverse=True)
        return unique_results[:top_k]
    
    def get_answer(self, query: str) -> str:
        """–ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é"""
        
        # –ò—â–µ–º –ø–æ—Ö–æ–∂–∏–µ –∑–∞–ø–∏—Å–∏
        results = self.search(query, top_k=1)
        
        if not results:
            return "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –Ω–∞—à–µ–ª –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π."
        
        # –ë–µ—Ä–µ–º –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        best_match = results[0]
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (—Å–Ω–∏–∂–∞–µ–º –ø–æ—Ä–æ–≥ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è)
        confidence = min(best_match["similarity_score"] / 60.0, 1.0)
        
        if confidence > 0.3:  # –°–Ω–∏–∂–∞–µ–º –ø–æ—Ä–æ–≥ —Å 0.4 –¥–æ 0.3
            # –î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ç–≤–µ—Ç
            return best_match["answer"]
        else:
            # –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—â–∏–π –æ—Ç–≤–µ—Ç
            return "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —É–≤–µ—Ä–µ–Ω –≤ –æ—Ç–≤–µ—Ç–µ. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –∏–º–µ–ª–∏ –≤ –≤–∏–¥—É —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ?"

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
enhanced_aparu_search = EnhancedAPARUSearch()
enhanced_aparu_search.load_knowledge_base()

def get_enhanced_aparu_answer(query: str) -> str:
    """–ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç —É–ª—É—á—à–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞ APARU"""
    return enhanced_aparu_search.get_answer(query)

if __name__ == "__main__":
    print("üöÄ –°–æ–∑–¥–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞ APARU...")
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º
    test_queries = [
        "–ü–æ—á–µ–º—É —Ç–∞–∫ –¥–æ—Ä–æ–≥–æ?",
        "–ö–∞–∫ –∑–∞–ø–ª–∞—Ç–∏—Ç—å –∑–∞ –ø–æ–µ–∑–¥–∫—É?",
        "–ú–æ–∂–Ω–æ –ª–∏ –∑–∞–∫–∞–∑–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ?",
        "–ö–∞–∫ —Å—Ç–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª–µ–º?",
        "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è",
        "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–∞—Ü–µ–Ω–∫–∞?",
        "–ì–¥–µ –Ω–∞–π—Ç–∏ —Ü–µ–Ω—É?",
        "–ö–∞–∫ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å—ã–ª–∫—É?",
        "–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–º—Ñ–æ—Ä—Ç?",
        "–ü–æ—á–µ–º—É —Å—á–∏—Ç–∞—é—Ç –≤—Ä–µ–º—è?",
        "–ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑?",
        "–í–æ–¥–∏—Ç–µ–ª—å –Ω–µ –ø—Ä–∏–µ—Ö–∞–ª",
        "–ö–∞–∫ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º?",
        "–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–æ–¥–∏—Ç–µ–ª—å?",
        "–ß—Ç–æ —Ç–∞–∫–æ–µ —ç–∫–æ–Ω–æ–º?",
        "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª?",
        "–ú–æ–∂–Ω–æ –ª–∏ –∑–∞–∫–∞–∑–∞—Ç—å –≥—Ä—É–∑–æ–≤–æ–µ?",
        "–ö–∞–∫ –∑–∞–∫–∞–∑–∞—Ç—å —ç–≤–∞–∫—É–∞—Ç–æ—Ä?",
        "–°–ø–∏—Å–∞–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É",
        "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É?",
        "–ú–æ–∂–Ω–æ –ª–∏ –æ–ø–ª–∞—Ç–∏—Ç—å –Ω–∞–ª–∏—á–Ω—ã–º–∏?",
        "–ö–∞–∫ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫–∞—Ä—Ç—É?",
        "–ó–∞–±—ã–ª –≤–µ—â–∏ –≤ —Ç–∞–∫—Å–∏",
        "–ö–∞–∫ –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤?",
        "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–º–æ–∫–æ–¥?",
        "–ú–æ–∂–Ω–æ –ª–∏ –∑–∞–∫–∞–∑–∞—Ç—å –¥–ª—è –º–∞–º—ã?",
        "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥?",
        "–í–æ–¥–∏—Ç–µ–ª—å –≤–µ–¥–µ—Ç —Å–µ–±—è –ø–ª–æ—Ö–æ"
    ]
    
    print("\nüîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:")
    
    success_count = 0
    total_count = len(test_queries)
    
    for query in test_queries:
        print(f"\n‚ùì –í–æ–ø—Ä–æ—Å: {query}")
        answer = get_enhanced_aparu_answer(query)
        
        if "–∏–∑–≤–∏–Ω–∏—Ç–µ" not in answer.lower() and "–Ω–µ —É–≤–µ—Ä–µ–Ω" not in answer.lower():
            success_count += 1
            print(f"‚úÖ –û—Ç–≤–µ—Ç: {answer[:100]}...")
        else:
            print(f"‚ùå –û—Ç–≤–µ—Ç: {answer}")
    
    print(f"\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: {success_count}/{total_count} —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ ({success_count/total_count*100:.1f}%)")
    print("\n‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –≥–æ—Ç–æ–≤–∞!")
    print("üéØ –¢–µ–ø–µ—Ä—å –º–æ–¥–µ–ª—å –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç!")
