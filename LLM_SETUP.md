# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ LLM –¥–ª—è APARU

## üéØ –¶–µ–ª—å
–ó–∞–ø—É—Å—Ç–∏—Ç—å LLM –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –µ–≥–æ –∫ Railway production –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama
```bash
# macOS
brew install ollama

# Linux
curl -fsSL https://ollama.ai/install.sh | sh

# Windows
# –°–∫–∞—á–∞–π—Ç–µ —Å https://ollama.ai/download
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
```bash
# –ó–∞–≥—Ä—É–∂–∞–µ–º LLaMA 2 (7B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
ollama pull llama2

# –ò–ª–∏ –±–æ–ª–µ–µ –ª–µ–≥–∫—É—é –º–æ–¥–µ–ª—å
ollama pull llama2:7b
```

### 3. –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º Ollama —Å–µ—Ä–≤–µ—Ä
ollama serve

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º
curl http://localhost:11434/api/tags
```

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç—É–Ω–Ω–µ–ª—è (ngrok)
```bash
# macOS
brew install ngrok

# –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å https://ngrok.com/download
```

### 5. –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è
```bash
# –°–æ–∑–¥–∞–µ–º —Ç—É–Ω–Ω–µ–ª—å –∫ Ollama
ngrok http 11434

# –ü–æ–ª—É—á–∏—Ç–µ URL –≤–∏–¥–∞: https://abc123.ngrok.io
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Railway

### 1. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway:
```bash
LLM_URL=https://your-ngrok-url.ngrok.io
LLM_MODEL=llama2
LLM_ENABLED=true
```

### 2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç:
```bash
python3 local_llm_server.py
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
```bash
curl -X POST http://localhost:11434/api/generate \
  -H "Content-Type: application/json" \
  -d '{
    "model": "llama2",
    "prompt": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
    "stream": false
  }'
```

### 2. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ —Ç—É–Ω–Ω–µ–ª—å
```bash
curl -X POST https://your-ngrok-url.ngrok.io/api/generate \
  -H "Content-Type: application/json" \
  -d '{
    "model": "llama2", 
    "prompt": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
    "stream": false
  }'
```

### 3. –¢–µ—Å—Ç APARU API
```bash
curl -X POST https://taxi-support-ai-assistant-production.up.railway.app/chat \
  -H "Content-Type: application/json" \
  -d '{
    "text": "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ —Ü–µ–Ω—ã –Ω–∞ —Ç–∞–∫—Å–∏",
    "user_id": "test123",
    "locale": "RU"
  }'
```

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. **Cloudflare Tunnel** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
npm install -g cloudflared

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è
cloudflared tunnel --url http://localhost:11434
```

### 2. **Serveo** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
```bash
# –ü—Ä–æ—Å—Ç–æ–π SSH —Ç—É–Ω–Ω–µ–ª—å
ssh -R 80:localhost:11434 serveo.net
```

### 3. **LocalTunnel** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
npm install -g localtunnel

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è
lt --port 11434
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `LLM_URL` - URL –≤–∞—à–µ–≥–æ LLM —Å–µ—Ä–≤–µ—Ä–∞
- `LLM_MODEL` - –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (llama2)
- `LLM_ENABLED` - –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å LLM (true/false)

### –ü—Ä–∏–º–µ—Ä .env —Ñ–∞–π–ª–∞:
```bash
LLM_URL=https://abc123.ngrok.io
LLM_MODEL=llama2
LLM_ENABLED=true
```

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ngrok URL –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ URL
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –ø–æ IP –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ

### 2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- LLaMA 2 —Ç—Ä–µ–±—É–µ—Ç ~4GB RAM
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –ª–µ–≥–∫–∏–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### 3. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**
- –¢—É–Ω–Ω–µ–ª—å –º–æ–∂–µ—Ç —Ä–∞–∑—Ä—ã–≤–∞—Ç—å—Å—è
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –ò–º–µ–π—Ç–µ fallback –Ω–∞ –≥–æ—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ (macOS):
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª ~/start_llm.sh
#!/bin/bash
cd /path/to/your/project
ollama serve &
sleep 5
ngrok http 11434 &
```

### –î–æ–±–∞–≤—å—Ç–µ –≤ crontab:
```bash
# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
@reboot /path/to/start_llm.sh
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Ollama:
```bash
curl http://localhost:11434/api/tags
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—É–Ω–Ω–µ–ª—è:
```bash
curl http://localhost:4040/api/tunnels
```

### 3. –õ–æ–≥–∏ Railway:
```bash
railway logs
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ LLM —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
- ‚úÖ Railway –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã –æ—Ç –≤–∞—à–µ–≥–æ LLM
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —É–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ Fallback —Å–∏—Å—Ç–µ–º–∞ –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Ollama –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
lsof -i :11434

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
pkill ollama
ollama serve
```

### –¢—É–Ω–Ω–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ngrok
ngrok version

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
pkill ngrok
ngrok http 11434
```

### Railway –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç—É–Ω–Ω–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway
